WEBVTT

1
00:00:05.700 --> 00:00:07.500
["Покажи и расскажи": цифровая версия]

2
00:00:08.252 --> 00:00:11.550
Привет! Я Монти Монтгомери из Red Hat и Xiph.Org.

3
00:00:11.550 --> 00:00:18.430
Несколько месяцев назад я написал статью о цифровом аудио и почему нет смысла в загрузке музыки 24 бит / 192 кГц.

4
00:00:18.430 --> 00:00:23.433
В той статье я почти вскользь отметил, что форма цифровой волны не ступенчатая,

5
00:00:23.433 --> 00:00:28.680
и что вы точно не получите ровные ступеньки, когда преобразуете из цифры обратно в аналог.

6
00:00:29.865 --> 00:00:33.865
Из всего, что было в статье, <b>это</b> было темой номер один, о чем люди писали.

7
00:00:33.865 --> 00:00:37.221
На самом деле, более половины всех полученных писем составили вопросы и комментарии

8
00:00:37.221 --> 00:00:39.663
об основах поведения цифрового сигнала.

9
00:00:39.894 --> 00:00:45.285
Поскольку многим интересно, давайте уделим некоторое время, чтобы поиграться с <u>простым</u> цифровым сигналом.

10
00:00:45.000 --> 00:00:49.000
["Истина из машины"]

11
00:00:49.747 --> 00:00:51.006
Вспомним на секунду,

12
00:00:51.006 --> 00:00:54.089
что мы без понятия, как на самом деле цифровой сигнал ведет себя.

13
00:00:54.734 --> 00:00:56.841
В этом случае нам также нет никакого смысла

14
00:00:56.841 --> 00:00:59.049
использовать цифровое испытательное оборудование.

15
00:00:59.049 --> 00:01:00.937
К счастью, для данной работы где-то здесь

16
00:01:00.937 --> 00:01:04.020
все еще имеется куча аналогового лабораторного оборудования.

17
00:01:04.020 --> 00:01:05.972
Во-первых, нам нужен генератор сигналов,

18
00:01:05.972 --> 00:01:08.190
чтобы обеспечить нас аналоговыми входными сигналами.

19
00:01:08.190 --> 00:01:12.692
В данном случае это HP3325 1978 года.

20
00:01:12.692 --> 00:01:14.153
Это по-прежнему довольно хороший генератор,

21
00:01:14.153 --> 00:01:15.614
так что если вас не заботят габариты,

22
00:01:15.614 --> 00:01:16.532
вес,

23
00:01:16.532 --> 00:01:17.577
потребление электроэнергии

24
00:01:17.577 --> 00:01:18.910
и шумный вентилятор,

25
00:01:18.910 --> 00:01:20.329
то можете найти их на eBay.

26
00:01:20.329 --> 00:01:23.863
Иногда они чуть дороже, чем вы заплатите за доставку.

27
00:01:24.617 --> 00:01:28.500
Затем, мы будем наблюдать за диаграммами аналоговых сигналов на аналоговых осциллографах,

28
00:01:28.500 --> 00:01:31.550
таких как этот Tektronix 2246 из середины 90х –

29
00:01:31.550 --> 00:01:34.761
один из последних и самых лучших аналоговых осциллографов.

30
00:01:34.761 --> 00:01:36.807
В каждой домашней лаборатории по-хорошему должен быть такой.

31
00:01:37.716 --> 00:01:40.852
Наконец, изучим спектр частот наших сигналов,

32
00:01:40.852 --> 00:01:43.177
используя аналоговый анализатор спектра.

33
00:01:43.177 --> 00:01:47.732
Это HP3585 из той же линейки, что и генератор сигналов.

34
00:01:47.732 --> 00:01:50.615
Как и другое имеющееся оборудование, он оснащен

35
00:01:50.615 --> 00:01:52.905
элементарным и нереально большим микроконтроллером,

36
00:01:52.905 --> 00:01:56.276
но сигнал на всем пути от входа до того, что вы видите на экране,

37
00:01:56.276 --> 00:01:58.537
полностью аналоговый.

38
00:01:58.537 --> 00:02:00.329
Все это оборудование старинное,

39
00:02:00.329 --> 00:02:01.993
но, кроме внушительного веса,

40
00:02:01.993 --> 00:02:03.844
характеристики все еще достаточно хорошие.

41
00:02:04.536 --> 00:02:06.868
В данный момент наш генератор сигналов вырабатывает

42
00:02:06.868 --> 00:02:12.829
хорошую 1 кГц синусоиду со среднеквадратичным значением (СКЗ) напряжения 1 В.

43
00:02:13.414 --> 00:02:15.220
Мы видим синусоидальную волну на осциллографе,

44
00:02:15.220 --> 00:02:21.428
можем убедиться, что действительно 1 кГц и имеет СКЗ напряжения 1 В,

45
00:02:21.428 --> 00:02:24.108
то есть волна с размахом 2,8 В,

46
00:02:24.308 --> 00:02:27.561
и что она также соответствует измерениям спектрального анализатора.

47
00:02:27.561 --> 00:02:30.644
Анализатор еще показывает белый шум низкой амплитуды

48
00:02:30.644 --> 00:02:32.190
и небольшое гармоническое искажение

49
00:02:32.190 --> 00:02:36.649
с наибольшим пиком около 70 дБ ниже несущей частоты.

50
00:02:36.649 --> 00:02:38.612
Хоть это и совсем не важно в наших опытах,

51
00:02:38.612 --> 00:02:40.574
но я хотел отметить это сейчас

52
00:02:40.574 --> 00:02:42.452
на случай, если вы не замечали это ранее.

53
00:02:44.036 --> 00:02:47.142
Сейчас мы понизим частоту дискретизации до средних значений.

54
00:02:48.557 --> 00:02:51.024
Для преобразования мы будем использовать непримечательное

55
00:02:51.024 --> 00:02:53.374
потребительское аудиоустройство eMagic USB1.

56
00:02:53.374 --> 00:02:55.337
Оно уже тоже старше десяти лет

57
00:02:55.337 --> 00:02:57.257
и продолжает устаревать.

58
00:02:57.964 --> 00:03:02.676
Современный конвертер без труда может иметь характеристики на порядок выше.

59
00:03:03.076 --> 00:03:07.924
Неравномерность АЧХ, нелинейность, джиттер, шумовые характеристики и прочее…

60
00:03:07.924 --> 00:03:09.353
что вы могли и не заметить.

61
00:03:09.353 --> 00:03:11.604
То, что мы можем измерить улучшение,

62
00:03:11.604 --> 00:03:13.609
не значит, что мы можем это услышать,

63
00:03:13.609 --> 00:03:16.404
и даже эти старые коробочки потребительского уровня

64
00:03:16.404 --> 00:03:18.643
уже тогда были на грани прозрачности [Transparency (data compression)]

65
00:03:20.244 --> 00:03:22.825
eMagic подключен к моему ThinkPad,

66
00:03:22.825 --> 00:03:26.121
который отображает диаграмму цифрового сигнала и спектр для сравнения, 

67
00:03:26.121 --> 00:03:28.788
затем ThinkPad отправляет цифровой сигнал обратно в

68
00:03:28.788 --> 00:03:30.921
eMagic для преобразования обратно в аналоговый сигнал

69
00:03:30.921 --> 00:03:33.332
и наблюдения на экране осциллографа.

70
00:03:33.332 --> 00:03:35.582
Со входа на выход. Слева направо.

71
00:03:36.00 --> 00:03:39.000
["Ступеньки"]

72
00:03:40.211 --> 00:03:41.214
Все, пора начинать.

73
00:03:41.214 --> 00:03:43.924
Начнем с преобразования аналогового сигнала в цифровой,

74
00:03:43.924 --> 00:03:47.347
a потом – снова обратно в аналоговый, и больше ничего.

75
00:03:47.347 --> 00:03:49.268
Генератор сигналов настроен на создание

76
00:03:49.268 --> 00:03:52.649
синусоиды с частотой 1 кГц, как и прежде.

77
00:03:52.649 --> 00:03:57.428
Со входа мы можем видеть нашу аналоговую синусоиду на осциллографе.

78
00:03:57.428 --> 00:04:01.694
Мы оцифровываем сигнал с помощью ИКМ (16 бит, 44,1 кГц) –

79
00:04:01.694 --> 00:04:03.828
так же, как звук на CD.

80
00:04:03.828 --> 00:04:07.156
Спектр оцифрованного сигнала соответствует тому, что мы видели ранее. И-и…

81
00:04:07.156 --> 00:04:10.836
вот что мы видим на аналоговом анализаторе спектра,

82
00:04:10.836 --> 00:04:15.154
не считая чуть прибавившихся шумов из-за входа с высоким сопротивлением.

83
00:04:15.154 --> 00:04:15.956
В то же время

84
00:04:18.248 --> 00:04:20.798
окно вывода диаграмм показывает нашу оцифрованную синусоиду

85
00:04:20.798 --> 00:04:23.966
в ступенчатом виде – по ступеньке на отсчет.

86
00:04:23.966 --> 00:04:26.388
И, когда мы смотрим на выходной сигнал,

87
00:04:26.388 --> 00:04:29.054
т.е. сконвертированный в аналоговый из цифрового, мы видим…

88
00:04:29.054 --> 00:04:32.052
Он в точности такой же, как первоначальная синусоида.

89
00:04:32.052 --> 00:04:33.483
Никаких ступенек.

90
00:04:33.914 --> 00:04:37.193
Ладно, все же 1 кГц и правда низкая частота.

91
00:04:37.193 --> 00:04:40.633
Может ступеньки просто сложно разглядеть или они были сглажены?

92
00:04:40.739 --> 00:04:49.492
Логично. Давайте поднимем частоту примерно до частоты Найквиста. Скажем, до 15 кГц.

93
00:04:49.492 --> 00:04:53.545
Теперь синусоида описывается менее чем тремя отсчетами за период, и…

94
00:04:53.545 --> 00:04:55.838
цифровая диаграмма выглядит довольно ужасно.

95
00:04:55.838 --> 00:04:59.798
Что ж, внешность обманчива. Аналоговый выход…

96
00:05:01.876 --> 00:05:06.033
по-прежнему идеальная синусоида, точь-в-точь как исходная.

97
00:05:06.633 --> 00:05:09.228
Продолжим поднимать частоту.

98
00:05:17.353 --> 00:05:20.151
16 кГц

99
00:05:23.198 --> 00:05:25.616
17 кГц

100
00:05:28.201 --> 00:05:29.945
18 кГц

101
00:05:33.822 --> 00:05:35.548
19 кГц

102
00:05:40.457 --> 00:05:42.465
20 кГц

103
00:05:49.097 --> 00:05:52.350
Добро пожаловать в верхние пределы слышимости человеком.

104
00:05:52.350 --> 00:05:54.377
Выходная диаграмма сигнала по-прежнему отличная.

105
00:05:54.377 --> 00:05:58.025
Ни рванных краев, ни завалов, ни ступенек.

106
00:05:58.025 --> 00:06:01.342
Так куда пропали ступеньки?

107
00:06:01.342 --> 00:06:03.198
Не отвечайте, это каверзный вопрос.

108
00:06:03.198 --> 00:06:04.318
Ступенек там никогда не было.

109
00:06:04.318 --> 00:06:06.652
Изображение цифровой диаграммы сигнала ступеньками

110
00:06:08.712 --> 00:06:10.772
было изначально неправильным.

111
00:06:10.942 --> 00:06:11.998
Почему?

112
00:06:11.998 --> 00:06:14.366
Ступенчатая кривая – это график непрерывной функции.

113
00:06:14.366 --> 00:06:16.201
Она угловатая и кусочно-постоянная,

114
00:06:16.201 --> 00:06:19.700
но имеет определенное значение в каждый момент времени. 

115
00:06:19.700 --> 00:06:22.004
Дискретизированный сигнал совершенно другой.

116
00:06:22.004 --> 00:06:23.337
Он дискретен по времени

117
00:06:23.337 --> 00:06:27.337
и определен только в каждой точке отсчета,

118
00:06:27.337 --> 00:06:32.596
и не определен, т.е. вообще нет значений, всюду между отсчетами.

119
00:06:32.596 --> 00:06:36.666
Дискретный сигнал следует изображать дискретными отсчетами.

120
00:06:40.020 --> 00:06:42.974
Непрерывный аналоговый коллега цифрового сигнала

121
00:06:42.974 --> 00:06:45.364
плавно проходит каждую точку отсчета,

122
00:06:45.364 --> 00:06:50.153
и это также справедливо как для высоких частот, так и для низких.

123
00:06:50.153 --> 00:06:53.033
Далее, интересная и совсем не очевидная часть:

124
00:06:53.033 --> 00:06:55.454
существует только один сигнал с ограниченной полосой частот, проходящий

125
00:06:55.454 --> 00:06:57.417
строго через каждую точку отсчета.

126
00:06:57.417 --> 00:06:58.708
Это единственное решение.

127
00:06:58.708 --> 00:07:01.246
Так что если вы дискретизируете сигнал с ограниченной полосой частот

128
00:07:01.246 --> 00:07:02.612
и потом конвертируете обратно,

129
00:07:02.612 --> 00:07:06.462
то исходный входной сигнал – единственный возможный сигнал на выходе.

130
00:07:06.462 --> 00:07:07.838
И прежде, чем вы скажете:

131
00:07:07.838 --> 00:07:11.721
"Ну, я могу нарисовать другой сигнал, проходящий через эти точки".

132
00:07:11.721 --> 00:07:14.283
Хорошо, да, вы можете, но…

133
00:07:17.268 --> 00:07:20.521
Даже если сигнал отличается едва заметно от исходного,

134
00:07:20.521 --> 00:07:24.905
то он содержит частотную составляющую на частоте Найквиста или за ее пределом,

135
00:07:24.905 --> 00:07:26.185
нарушая требование ограниченности полосы частот,

136
00:07:26.185 --> 00:07:28.358
что делает такой сигнал неподходящим решением. 

137
00:07:28.574 --> 00:07:30.036
Как же так все сбились с толку

138
00:07:30.036 --> 00:07:32.702
и начали думать о цифровом сигнале как о ступенчатой кривой?

139
00:07:32.702 --> 00:07:34.900
Я могу придумать две хорошие причины.

140
00:07:34.900 --> 00:07:37.956
Первая – довольно просто представить дискретизированный сигнал

141
00:07:37.972 --> 00:07:39.294
в виде ступенчатой кривой.

142
00:07:39.294 --> 00:07:42.409
Просто расширьте значение каждой точки отсчета вперед до следующего отсчета.

143
00:07:42.409 --> 00:07:44.414
Это называется экстраполяцией нулевого порядка

144
00:07:44.414 --> 00:07:47.913
и является важной частью в работе некоторых цифро-аналоговых преобразователей,

145
00:07:47.913 --> 00:07:50.089
особенно самых простых из них.

146
00:07:50.089 --> 00:07:55.591
Так что любой кто ищет о цифро-аналоговом преобразовании,

147
00:07:55.592 --> 00:07:59.550
вероятно, увидит где-нибудь диаграмму со ступенчатой кривой,

148
00:07:59.550 --> 00:08:01.982
но это не законченное преобразование,

149
00:08:01.982 --> 00:08:04.250
и это не сигнал, получаемый на выходе.

150
00:08:04.944 --> 00:08:05.684
Вторая причина –

151
00:08:05.684 --> 00:08:07.529
и это, видимо, более вероятная причина –

152
00:08:07.529 --> 00:08:09.449
инженеры, которые вроде как знают лучше,

153
00:08:09.449 --> 00:08:10.441
типа меня,

154
00:08:10.441 --> 00:08:13.193
рисуют ступенчатые кривые, пусть даже эти графики технически неправильны.

155
00:08:13.193 --> 00:08:15.571
Это что-то типа одномерной версии 

156
00:08:15.571 --> 00:08:17.395
растолстевших бит в цифровых редакторах.

157
00:08:17.395 --> 00:08:19.241
Пиксели тоже не квадратные, они –

158
00:08:19.241 --> 00:08:23.081
отсчеты функции, заданной на двумерном пространстве, так что они тоже,

159
00:08:23.081 --> 00:08:26.366
концептуально, – бесконечно маленькие точки.

160
00:08:26.366 --> 00:08:28.500
На практике, это тот еще геморрой – смотреть

161
00:08:28.500 --> 00:08:30.804
или обрабатывать что-либо бесконечно маленькое.

162
00:08:30.804 --> 00:08:32.212
Поэтому и большие квадраты.

163
00:08:32.212 --> 00:08:35.966
Тоже самое и с изображением цифровых сигналов ступеньками.

164
00:08:35.966 --> 00:08:37.684
Так просто удобнее рисовать.

165
00:08:37.684 --> 00:08:40.404
Никаких ступенек на самом деле нет.

166
00:08:41.000 --> 00:08:45.000
["Глубина дискретизации"]

167
00:08:45.652 --> 00:08:48.233
Когда мы преобразовываем цифру обратно в аналог,

168
00:08:48.233 --> 00:08:50.900
результат <u>такой же</u> плавный независимо от глубины дискретизации:

169
00:08:50.900 --> 00:08:53.193
24 бит или 16 бит…

170
00:08:53.193 --> 00:08:54.196
или 8 бит…

171
00:08:54.196 --> 00:08:55.486
– без разницы.

172
00:08:55.486 --> 00:08:57.534
Значит ли это, что глубина дискретизации

173
00:08:57.534 --> 00:08:58.953
совсем ни на что не влияет?

174
00:08:59.245 --> 00:09:00.521
Конечно нет.

175
00:09:02.121 --> 00:09:06.046
Второй канал здесь – это та же входная синусоида,

176
00:09:06.046 --> 00:09:09.086
но мы квантуем с дизерингом, используя глубину 8 бит.

177
00:09:09.086 --> 00:09:14.174
На осциллографе мы все еще видим плавную синусоиду на 2-м канале.

178
00:09:14.174 --> 00:09:18.014
Присмотритесь внимательнее, и вы также увидите немного больше шума.

179
00:09:18.014 --> 00:09:19.305
Вот, в чем загвоздка.

180
00:09:19.305 --> 00:09:21.273
Если мы посмотрим на спектр сигнала…

181
00:09:22.889 --> 00:09:23.732
Ага!

182
00:09:23.732 --> 00:09:26.398
Наша синусоида все еще там нетронутая,

183
00:09:26.398 --> 00:09:28.490
но уровень шума восьмибитного сигнала

184
00:09:28.490 --> 00:09:32.470
на 2-м канале намного выше!

185
00:09:32.948 --> 00:09:36.148
В этом и заключается отличие между разным числом бит.

186
00:09:36.148 --> 00:09:37.434
Вот и все!

187
00:09:37.822 --> 00:09:39.956
Когда мы оцифровываем сигнал, сперва мы дискретизируем его.

188
00:09:39.956 --> 00:09:42.366
Этап дискретизирования идеален: потерь не происходит.

189
00:09:42.366 --> 00:09:45.626
Но потом мы квантуем его, и квантование добавляет шум.

190
00:09:47.827 --> 00:09:50.793
Число бит определяет то, как много шума добавится,

191
00:09:50.793 --> 00:09:52.569
и потому – степень уровня шума.

192
00:10:00.170 --> 00:10:03.646
Как звучит этот шум квантования после дизеринга?

193
00:10:03.646 --> 00:10:06.012
Давайте послушаем нашу восьмибитную синусоиду.

194
00:10:12.521 --> 00:10:15.273
Наверно, было сложно что-либо услышать, кроме тона.

195
00:10:15.273 --> 00:10:18.740
Давайте послушаем только шум, подавив сперва синусоиду,

196
00:10:18.740 --> 00:10:21.683
а потом сделав все чуть громче, потому что шум тихий.

197
00:10:32.009 --> 00:10:35.049
Те из вас, кто пользовался аналоговыми записывающими устройствами,

198
00:10:35.049 --> 00:10:36.670
могли подумать про себя:

199
00:10:36.670 --> 00:10:40.382
"Боже мой! Это звучит как шипение ленты!"

200
00:10:40.382 --> 00:10:41.929
Что ж, это не просто звучит как шипение магнитной ленты –

201
00:10:41.929 --> 00:10:43.433
оно ведет себя также,

202
00:10:43.433 --> 00:10:45.225
и если мы применим дизеринг с гауссовой функцией плотности распределения вероятности,

203
00:10:45.225 --> 00:10:47.646
то этот шум будет математически эквивалентным во всех отношениях.

204
00:10:47.646 --> 00:10:49.225
Это и <u>есть</u> шипение ленты.

205
00:10:49.225 --> 00:10:51.774
Легко догадаться, что мы можем измерить шипение ленты

206
00:10:51.774 --> 00:10:54.196
и, следовательно, уровень шума магнитной аудиокассеты

207
00:10:54.196 --> 00:10:56.233
в битах, а не в децибелах,

208
00:10:56.233 --> 00:10:59.902
чтобы рассмотреть все сквозь цифровую призму.

209
00:10:59.902 --> 00:11:03.028
Компакт-кассеты…

210
00:11:03.028 --> 00:11:05.449
для тех из вас, кто достаточно взрослый, чтобы помнить их, – 

211
00:11:05.449 --> 00:11:09.161
они могли достигать глубины в 9 бит в идеальных условиях,

212
00:11:09.161 --> 00:11:11.209
хотя как правило – от 5 до 6 бит,

213
00:11:11.209 --> 00:11:13.876
особенно, если это была запись, сделанная на магнитофон.

214
00:11:13.876 --> 00:11:19.422
Так и есть… ваши кассеты с миксами были лишь около 6 бит глубины дискретизации… если вам повезет!

215
00:11:19.837 --> 00:11:22.345
Лучшие профессиональные ленты для катушечного магнитофона,

216
00:11:22.345 --> 00:11:24.553
используемые в студиях, едва могли достигнуть…

217
00:11:24.553 --> 00:11:26.473
как думаете, сколько?

218
00:11:26.473 --> 00:11:27.604
13 бит

219
00:11:27.604 --> 00:11:28.980
<u>с применением</u> улучшенного шумоподавления.

220
00:11:28.980 --> 00:11:32.062
И вот почему видеть "DDD" на компакт-диске

221
00:11:32.062 --> 00:11:35.208
было таким важным, крутым делом.

222
00:11:35.800 --> 00:11:39.800
["Дизеринг"]

223
00:11:40.116 --> 00:11:42.825
Я постоянно говорю, что при квантовании применяю дизеринг,

224
00:11:42.825 --> 00:11:44.734
что это вообще такое?

225
00:11:44.734 --> 00:11:47.284
А главное, что делает дизеринг?

226
00:11:47.284 --> 00:11:49.876
Простым способом при квантовании сигнала является выбор

227
00:11:49.876 --> 00:11:52.329
ближайшего цифрового значения амплитуды 

228
00:11:52.329 --> 00:11:54.377
к исходной аналоговой амплитуде.

229
00:11:54.377 --> 00:11:55.337
Очевидно, правда?

230
00:11:55.337 --> 00:11:57.545
К несчастью, точный уровень шума, получаемый,

231
00:11:57.545 --> 00:11:59.220
используя такой простой подход при квантовании,

232
00:11:59.220 --> 00:12:02.174
отчасти зависит от входного сигнала,

233
00:12:02.174 --> 00:12:04.596
поэтому мы можем получить или нестабильный,

234
00:12:04.596 --> 00:12:06.142
или вызывающий искажения,

235
00:12:06.142 --> 00:12:09.054
или нежелательный в каком-то другом смысле шум.

236
00:12:09.054 --> 00:12:11.764
Дизеринг – это специально созданный шум, которым

237
00:12:11.764 --> 00:12:15.273
подменяют производимый при квантовании шум.

238
00:12:15.273 --> 00:12:18.025
Дизеринг не заглушает или маскирует шум квантования,

239
00:12:18.025 --> 00:12:20.190
он фактически заменяет его

240
00:12:20.190 --> 00:12:22.612
желаемыми шумовыми характеристиками,

241
00:12:22.612 --> 00:12:24.794
не попадающими под влияние входного сигнала.

242
00:12:25.256 --> 00:12:27.081
Давайте <u>посмотрим</u>, что делает дизеринг.

243
00:12:27.081 --> 00:12:30.078
У генератора сигналов слишком много шумов для данного опыта,

244
00:12:30.431 --> 00:12:33.161
поэтому будем создавать математически

245
00:12:33.161 --> 00:12:34.782
идеальную синусоиду с помощью ThinkPad

246
00:12:34.782 --> 00:12:38.205
и квантовать с глубиной дискретизации 8 бит и дизерингом.

247
00:12:39.006 --> 00:12:41.342
Мы видим хорошую синусоиду на экране временных диаграмм

248
00:12:41.342 --> 00:12:43.452
и на выходе осциллографа

249
00:12:44.222 --> 00:12:44.972
и…

250
00:12:46.588 --> 00:12:49.375
как только аналоговый анализатор спектра оживится…

251
00:12:50.713 --> 00:12:53.588
отчетливый частотный пик с равномерным уровнем шума

252
00:12:56.864 --> 00:12:58.611
на обоих экранах со спектром,

253
00:12:58.61 1 --> 00:12:59.646
как и ранее.

254
00:12:59.646 --> 00:13:01.549
Повторюсь, это с дизерингом.

255
00:13:02.196 --> 00:13:04.225
Теперь я выключаю дизеринг.

256
00:13:05.779 --> 00:13:07.913
Шум квантования, который был распределен дизерингом

257
00:13:07.913 --> 00:13:09.577
в хороший плоский уровень шума,

258
00:13:09.577 --> 00:13:12.286
сплющился в пики гармонического искажения.

259
00:13:12.286 --> 00:13:16.030
Уровень шума ниже, но уровень искажений уже ненулевой,

260
00:13:16.030 --> 00:13:19.668
и пики искажений установились выше, чем шум шум дизеринга.

261
00:13:19.668 --> 00:13:22.318
На восьми битах этот эффект утрирован.

262
00:13:22.488 --> 00:13:24.200
На шестнадцати битах,

263
00:13:24.692 --> 00:13:25.929
даже без дизеринга,

264
00:13:25.929 --> 00:13:28.308
гармонические искажения будут такими низкими,

265
00:13:28.308 --> 00:13:30.708
что их практически не услышать.

266
00:13:30.708 --> 00:13:34.581
Все равно, мы можем использовать дизеринг, чтобы полностью устранить искажения,

267
00:13:34.581 --> 00:13:36.489
если мы так выберем.

268
00:13:37.642 --> 00:13:39.273
Снова выключим дизеринг ненадолго,

269
00:13:40.934 --> 00:13:43.444
и вы заметите, что абсолютный уровень искажений

270
00:13:43.444 --> 00:13:47.070
при квантовании без дизеринга остается примерно постоянным

271
00:13:47.070 --> 00:13:49.033
независимо от амплитуды входного сигнала.

272
00:13:49.033 --> 00:13:51.998
Но когда уровень сигнала опускается немного ниже половины,

273
00:13:51.998 --> 00:13:54.036
все квантуется в ноль.

274
00:13:54.036 --> 00:13:54.910
По сути,

275
00:13:54.910 --> 00:13:58.557
"все квантуется в ноль" просто означает 100% искажение!

276
00:13:58.833 --> 00:14:01.588
Дизеринг тоже устраняет эти искажения.

277
00:14:01.588 --> 00:14:03.599
Мы снова включаем дизеринг и…

278
00:14:03.599 --> 00:14:06.377
наш сигнал появляется на 1/4 бит,

279
00:14:06.377 --> 00:14:09.076
вместе с хорошим плоским уровнем шума.

280
00:14:09.630 --> 00:14:11.220
Уровень шума не обязан быть плоским.

281
00:14:11.220 --> 00:14:12.798
Дизеринг – это шум, выбираемый нами,

282
00:14:12.798 --> 00:14:15.006
так давайте выберем шум настолько безобидный

283
00:14:15.006 --> 00:14:17.017
и труднозаметный, насколько возможно.

284
00:14:18.142 --> 00:14:22.484
Наш слух наиболее чувствителен в промежутке от 2 до 4 кГц,

285
00:14:22.484 --> 00:14:25.438
поэтому здесь фоновый шум будет наиболее заметным.

286
00:14:25.438 --> 00:14:29.406
Мы можем сформировать шум дизеринга подальше от чувствительных частот

287
00:14:29.406 --> 00:14:31.241
туда, где слух менее восприимчив – 

288
00:14:31.241 --> 00:14:33.910
обычно это область высоких частот.

289
00:14:34.249 --> 00:14:37.460
16 бит шум дизеринга, как правило, слишком тихий, чтобы услышать,

290
00:14:37.460 --> 00:14:39.668
но давайте послушаем пример работы нойз-шейпинга,

291
00:14:39.668 --> 00:14:42.234
опять же, с усилением сигнала…

292
00:14:56.020 --> 00:14:59.977
И наконец, общая мощность шума квантования после дизеринга <u>выше</u>,

293
00:14:59.977 --> 00:15:04.276
чем шум квантования без дизеринга, даже если первый звучит тише.

294
00:15:04.276 --> 00:15:07.902
Можете увидеть это на измерителе уровня звука во время тишины.

295
00:15:07.902 --> 00:15:10.537
Но дизеринг не только можно включить или выключить.

296
00:15:10.537 --> 00:15:14.712
Мы можем ослабить мощность дизеринга, балансируя между тишиной шума  

297
00:15:14.712 --> 00:15:18.313
и незначительными искажениями, минимизируя общий эффект.

298
00:15:19.605 --> 00:15:22.790
Также мы будем модулировать входной сигнал вот так:

299
00:15:27.098 --> 00:15:30.206
…чтобы показать, как изменение входного сигнала влияет на шум квантования.

300
00:15:30.206 --> 00:15:33.289
На полной мощности дизеринга, шум единообразен, постоянен

301
00:15:33.289 --> 00:15:35.643
и невыразителен, как мы и ожидали:

302
00:15:40.937 --> 00:15:42.772
При уменьшении мощности дизеринга,

303
00:15:42.772 --> 00:15:46.356
входной сигнал все больше и больше влияет на амплитуду и свойства

304
00:15:46.356 --> 00:15:47.977
шума квантования:

305
00:16:09.883 --> 00:16:13.844
Поведение дизеринга после ноиз-шейпинга схоже,

306
00:16:13.844 --> 00:16:16.553
но ноиз-шейпинг дает еще одно хорошее преимущество.

307
00:16:16.553 --> 00:16:18.804
Короче говоря, он может использовать

308
00:16:18.804 --> 00:16:20.937
слегка меньшую мощность дизеринга прежде, чем входной сигнал

309
00:16:20.937 --> 00:16:23.662
окажет соответствующее влияние на выходной.

310
00:16:49.172 --> 00:16:51.508
Несмотря на все это время, что я потратил на дизеринг,

311
00:16:51.508 --> 00:16:53.012
мы говорим о различиях,

312
00:16:53.012 --> 00:16:56.372
начинающихся на 100 дБ ниже измеряемого диапазона.

313
00:16:56.372 --> 00:16:59.806
Возможно, если бы CD имели 14 бит, как изначально задумывалось,

314
00:16:59.806 --> 00:17:01.513
дизеринг <u>мог бы</u> быть важнее.

315
00:17:01.989 --> 00:17:02.644
Возможно.

316
00:17:02.644 --> 00:17:05.438
С 16 бит, на самом деле, почти без разницы.

317
00:17:05.438 --> 00:17:08.019
Вы можете думать о дизеринге как о страховке,

318
00:17:08.019 --> 00:17:11.443
дающей несколько дополнительных дБ к динамическому диапазону

319
00:17:11.443 --> 00:17:12.804
на всякий случай.

320
00:17:12.990 --> 00:17:14.196
Тем не менее, факт в том, что,

321
00:17:14.196 --> 00:17:16.361
никто не уничтожил великолепную запись,

322
00:17:16.361 --> 00:17:19.182
не воспользовавшись дизерингом при мастеринге звукозаписи.

323
00:17:19.600 --> 00:17:23.600
["Ограничение полосы частот и синхронизация"]

324
00:17:24.414 --> 00:17:25.790
Мы использовали синусоиды.

325
00:17:25.790 --> 00:17:28.254
Они являются очевидным выбором когда то, что хотим увидеть –

326
00:17:28.254 --> 00:17:32.212
это поведение системы на данной отдельной частоте.

327
00:17:32.212 --> 00:17:34.217
Теперь давайте рассмотрим кое-что посложнее.

328
00:17:34.217 --> 00:17:35.923
Что нам следует ожидать,

329
00:17:35.923 --> 00:17:39.671
когда я изменю входной сигнал на меандр?

330
00:17:42.718 --> 00:17:45.921
Осциллограф на входе выводит наш 1 кГц меандр.

331
00:17:45.921 --> 00:17:47.351
А осциллограф на выходе показывает…

332
00:17:48.614 --> 00:17:51.102
В точности, что и следует.

333
00:17:51.102 --> 00:17:53.900
Что такое меандр на самом деле?

334
00:17:54.654 --> 00:17:57.982
Скажем, это диаграмма сигнала, где есть положительное значение

335
00:17:57.982 --> 00:18:00.788
во время одного полупериода, мгновенно меняющееся

336
00:18:00.788 --> 00:18:02.910
на отрицательное в другом полупериоде.

337
00:18:02.910 --> 00:18:05.076
Но это на самом деле не сообщает ничего полезного о том,

338
00:18:05.076 --> 00:18:07.241
как этот входной сигнал

339
00:18:07.241 --> 00:18:09.378
становится таким на выходе.

340
00:18:10.132 --> 00:18:12.713
Далее, мы помним, что любая волна

341
00:18:12.713 --> 00:18:15.508
также является суммой дискретных частот,

342
00:18:15.508 --> 00:18:18.302
и меандр, в частности, – просто сумма

343
00:18:18.302 --> 00:18:19.636
несущей частоты и

344
00:18:19.636 --> 00:18:22.228
бесконечного числа нечетных гармоник.

345
00:18:22.228 --> 00:18:24.597
Сложите их все, и вы получите меандр.

346
00:18:26.398 --> 00:18:27.433
На первый взгляд,

347
00:18:27.433 --> 00:18:29.225
это тоже не похоже на полезную информацию.

348
00:18:29.225 --> 00:18:31.561
Необходимо сложить бесконечное число гармоник,

349
00:18:31.561 --> 00:18:33.108
чтобы получить ответ.

350
00:18:33.108 --> 00:18:35.977
А, но у нас нет бесконечного числа гармоник.

351
00:18:36.960 --> 00:18:39.902
У нас антиалиасинговый фильтр с крутым спадом переходной полосы,

352
00:18:39.902 --> 00:18:42.206
частота среза которого 20 кГц,

353
00:18:42.206 --> 00:18:44.158
поэтому наш сигнал ограничен по полосе частот,

354
00:18:44.158 --> 00:18:46.421
что означает следующее:

355
00:18:52.500 --> 00:18:56.468
…и это в точности, что мы видим на осциллографе с выхода.

356
00:18:56.468 --> 00:18:59.550
Пульсация, которую вы видите по краям сигнала с ограниченной полосой частот,

357
00:18:59.550 --> 00:19:00.926
называется "явлением Гиббса".

358
00:19:00.926 --> 00:19:04.137
Оно происходит всякий раз, когда вы срезаете часть области частот

359
00:19:04.137 --> 00:19:07.006
в пределах которой сосредоточена энергия сигнала.

360
00:19:07.006 --> 00:19:09.854
Обычно вы услышите эмпирическое правило: чем круче спад переходной полосы,

361
00:19:09.854 --> 00:19:11.188
тем сильнее пульсация.

362
00:19:11.188 --> 00:19:12.777
Что в общем-то правда,

363
00:19:12.777 --> 00:19:14.900
но нужно быть осторожнее в наших представлениях.

364
00:19:14.900 --> 00:19:15.774
Например…

365
00:19:15.774 --> 00:19:19.529
Что по-вашему будет делать наш "крутой" антиалиасинговый

366
00:19:19.529 --> 00:19:23.181
фильтр, если я пропущу через него сигнал дважды?

367
00:19:34.136 --> 00:19:37.588
Помимо добавления нескольких незначительных циклов задержек,

368
00:19:37.588 --> 00:19:39.348
ответ будет…

369
00:19:39.348 --> 00:19:40.857
вообще ничего.

370
00:19:41.257 --> 00:19:43.302
Сигнал уже ограничен по полосе частот.

371
00:19:43.656 --> 00:19:46.590
Повторное ограничение полосы частот ни на что не влияет.

372
00:19:46.590 --> 00:19:50.686
Второй проход не может убрать частоты, которые уже были удалены.

373
00:19:52.070 --> 00:19:53.737
И это важно.

374
00:19:53.737 --> 00:19:56.233
Люди склонны думать о пульсации как о своего рода артефакте,

375
00:19:56.233 --> 00:19:59.945
добавляемом антиалиасинговым и реконструкционным фильтрами,

376
00:19:59.945 --> 00:20:01.737
считая, что пульсация становится хуже

377
00:20:01.737 --> 00:20:03.913
с каждым проходом сигнала через них.

378
00:20:03.913 --> 00:20:05.950
Мы видим, что в данном случае этого не случилось.

379
00:20:05.950 --> 00:20:09.492
Так был ли это на самом деле фильтр, добавивший пульсацию при 1-м проходе?

380
00:20:09.492 --> 00:20:10.537
Нет, не совсем.

381
00:20:10.537 --> 00:20:12.126
Это деликатный момент,

382
00:20:12.126 --> 00:20:15.252
т.к. пульсация при эффекте Гиббса добавляется не фильтрами –

383
00:20:15.252 --> 00:20:18.836
она просто часть того, <u>чем является</u> сигнал с ограниченной полосой частот.

384
00:20:18.836 --> 00:20:20.798
Даже если мы искусственно сгенерируем сигнал,

385
00:20:20.798 --> 00:20:23.508
который выглядит как идеальный цифровой меандр,

386
00:20:23.508 --> 00:20:26.206
его полоса частот все равно ограничена полосой пропускания передающего канала.

387
00:20:26.206 --> 00:20:29.140
Вспомните, что ступенчатое представление кривой неточно.

388
00:20:29.140 --> 00:20:32.222
Что на самом деле есть у нас – это точки отсчета,

389
00:20:32.222 --> 00:20:36.148
и только 1 сигнал с ограниченной полосой частот подходит к этим точкам.

390
00:20:36.148 --> 00:20:39.614
Все что мы сделали, когда рисовали наш идеальный меандр,

391
00:20:39.614 --> 00:20:43.198
это расставили точки отсчета как раз, чтобы сложилось впечатление,

392
00:20:43.198 --> 00:20:47.785
что здесь нет пульсаций, если мы сыграем в "Соедини точки".

393
00:20:47.785 --> 00:20:49.449
Но исходный сигнал с ограниченной полосой частот

394
00:20:49.449 --> 00:20:52.742
вместе с пульсациями все еще там.

395
00:20:54.004 --> 00:20:56.542
И это ведет нас к еще одному важному моменту.

396
00:20:56.542 --> 00:20:59.550
Вы наверняка уже слышали, что точность синхронизации цифрового сигнала

397
00:20:59.550 --> 00:21:02.409
ограничена его частотой дискретизации; другими словами,

398
00:21:02.409 --> 00:21:05.140
якобы цифровые сигналы не могут представлять ничего,

399
00:21:05.140 --> 00:21:08.041
что попадает между точками отсчетов…

400
00:21:08.041 --> 00:21:11.422
имеется в виду, что импульсы или резкие скачки должны быть четко

401
00:21:11.422 --> 00:21:14.473
выравнены с отсчетами, или синхронизация будет утрачена…

402
00:21:14.473 --> 00:21:16.219
и они просто исчезнут.

403
00:21:16.711 --> 00:21:20.820
Теперь мы легко можем увидеть, почему это не так.

404
00:21:20.820 --> 00:21:23.742
Еще раз, наш входной сигнал ограничен по полосе частот.

405
00:21:23.742 --> 00:21:26.036
И цифровой сигнал – это точки отсчета,

406
00:21:26.036 --> 00:21:29.340
не ступеньки, не "Соедини точки".

407
00:21:31.572 --> 00:21:34.592
Мы определенно можем, например,

408
00:21:36.777 --> 00:21:39.337
разместить фронт нашего меандра с ограниченной полосой частот

409
00:21:39.337 --> 00:21:42.004
в любом месте между отсчетами.

410
00:21:42.004 --> 00:21:44.354
Меандр отлично изображается

411
00:21:47.508 --> 00:21:50.218
и отлично восстанавливается.

412
00:21:56.000 --> 00:22:02.000
["Эпилог"]

413
00:22:04.620 --> 00:22:06.526
Как и в предыдущей части,

414
00:22:06.526 --> 00:22:08.393
мы охватили широкий круг тем,

415
00:22:08.393 --> 00:22:10.868
и при этом лишь едва коснулись каждой из них.

416
00:22:10.868 --> 00:22:13.620
Если уж на то пошло, то в этот раз у меня больше грехов упущения…

417
00:22:13.620 --> 00:22:16.286
но это хороший момент все завершить.

418
00:22:16.286 --> 00:22:17.833
Или, может, хорошая отправная точка.

419
00:22:17.833 --> 00:22:18.708
Пробуйте копнуть глубже.

420
00:22:18.708 --> 00:22:19.710
Экспериментируйте.

421
00:22:19.710 --> 00:22:21.374
Я со всей тщательностью подбирал опыты,

422
00:22:21.374 --> 00:22:23.668
чтобы они были простыми и красноречивыми.

423
00:22:23.668 --> 00:22:26.217
Вы можете воспроизвести каждый из них самостоятельно, если хотите.

424
00:22:26.217 --> 00:22:28.766
Только давайте признаемся, что иногда мы узнаем больше

425
00:22:28.766 --> 00:22:30.516
о модной игрушке, разобрав ее до основания

426
00:22:30.516 --> 00:22:32.553
и изучая все выпавшие кусочки.

427
00:22:32.553 --> 00:22:35.230
И это нормально – мы инженеры.

428
00:22:35.230 --> 00:22:36.350
Поиграйтесь с демо-параметрами,

429
00:22:36.350 --> 00:22:37.972
хакните код,

430
00:22:37.972 --> 00:22:39.774
проведите другие опыты.

431
00:22:39.774 --> 00:22:40.692
Исходный код для всего,

432
00:22:40.692 --> 00:22:42.398
включая небольшое кнопочное демо-приложение,

433
00:22:42.398 --> 00:22:44.361
выложен на Xiph.Org.

434
00:22:44.361 --> 00:22:45.940
В ходе экспериментов,

435
00:22:45.940 --> 00:22:47.401
вы, скорее всего, столкнетесь с чем-то,

436
00:22:47.401 --> 00:22:49.950
чего не ожидали и не можете объяснить.

437
00:22:49.950 --> 00:22:51.198
Не переживайте!

438
00:22:51.198 --> 00:22:54.537
Без шуток, Википедия потрясающе подходит

439
00:22:54.537 --> 00:22:56.788
как раз для подобных неформальных исследований.

440
00:22:56.788 --> 00:22:59.956
Если вы действительно серьезно намерены разобраться в сигналах,

441
00:22:59.956 --> 00:23:03.337
у некоторых университетов есть онлайн материалы продвинутого уровня,

442
00:23:03.337 --> 00:23:07.380
например курсы 6.003 и 6.007 "Signals and Systems"

443
00:23:07.380 --> 00:23:08.798
на MIT OpenCourseWare.

444
00:23:08.798 --> 00:23:11.593
И, конечно же, сообщество Xiph.Org всегда доступно вам.

445
00:23:12.792 --> 00:23:13.929
Копать глубже или нет,

446
00:23:13.929 --> 00:23:14.974
у меня кончился кофе,

447
00:23:14.974 --> 00:23:16.436
так что до следующих встреч,

448
00:23:16.436 --> 00:23:19.316
веселого хакинга!

449
00:23:20.000 --> 00:23:23.000
[Титры]
